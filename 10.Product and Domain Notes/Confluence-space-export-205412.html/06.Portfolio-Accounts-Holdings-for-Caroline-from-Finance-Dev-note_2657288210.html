<!DOCTYPE html>
<html>
    <head>
        <title>Jackson Fan : 06.Portfolio Accounts Holdings for Caroline from Finance Dev note</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jackson Fan</a></span>
                            </li>
                                                    <li>
                                <span><a href="JF-Space-Overview_2554888272.html">JF Space Overview</a></span>
                            </li>
                                                    <li>
                                <span><a href="4.-Service-Portal-Related_2555510852.html">4. Service Portal Related</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jackson Fan : 06.Portfolio Accounts Holdings for Caroline from Finance Dev note
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                            
        
    
        
    
        
        
            Created by <span class='author'> Jackson Fan</span>, last modified on 03-09-24
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-ImportantFacts:">Important Facts:</h1><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-TermsandDefinition:">Terms and Definition:</h3><ul><li><p>CCY = currency</p></li><li><p>EQT = Equity</p></li><li><p>STA = My start Super start &gt;&gt; not totally Sure</p></li><li><p>CSS = Custodial Service</p></li><li><p>'<em>House Positions Raw Data With Price and Value of the holdings</em>'</p></li><li><p>[ACE to ABEL Trial Balance] is an Excel Spreadsheet that sit in the business users folder soemwhere</p></li><li><p>[ACE to ABEL Trial Balance June 2024 w 9212 reversed.xlsm] &gt;&gt; this the full name of the Excel Spreadsheet</p></li><li><p>‘ACE to Abel TB’ &gt;&gt; this is a terms that business users ued to refer to the “Ace Trial balance dataset“</p></li><li><p>Amount = Quantity * Average Cost</p></li><li><p>MV = Market value = (Price As at the market * Qty)</p></li><li><p>Gain/Loss = Market value - Amount</p></li></ul><hr/><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-TogetAceHoldings&gt;&gt;">To get Ace Holdings &gt;&gt; </h3><p>Server = aacarptsrv</p><p>DB= Ace</p><p><strong><span style="background-color: rgb(211,241,167);">Procs = dbo.geAcHold</span></strong></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">-- this is used to Query the Ace Account Holdings by AccountID , and AsAtDate
USE ace
GO
 
exec geAcHold 
    NULL, -- @pParentID
    &#39;FXARB&#39;, -- @pAccountID
    NULL, --@pCompany
    NULL, --@pHoldType
    NULL, --@pCommodity
    NULL, -- @pCurrency
    &#39;2024/05/31&#39;, -- @pAsAtDate
    NULL, --@pKeyTypeID1
    NULL, --@pKeyTypeD2
    NULL, --@pKeyTypeD3
    NULL, --@pKeyValue1
    NULL, --@pKeyValue2
    NULL, -- @pKeyValue3
    NULL, --@pExchangeID &gt;&gt; at what Stock Exchange we are trading on
    NULL, ---@pSecCode &gt;&gt; Security Code
    &#39;N&#39; --@pPopGNTable &gt;&gt; not sure what it means</pre>
</div></div><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-210728.png" width="331" loading="lazy" src="attachments/2657288210/2658369664.png?width=331" data-image-src="attachments/2657288210/2658369664.png" data-height="261" data-width="331" data-unresolved-comment-count="0" data-linked-resource-id="2658369664" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-210728.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="3ea05a9f-59cb-4203-88d4-f3670da97c3b" data-media-type="file"></span><hr/><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-ToGetTheCompanyTrialBalancefromAce:"> To Get The Company Trial Balance from Ace:</h3><p>We could use this procs&gt;&gt;</p><p><strong><span style="background-color: rgb(211,241,167);">ace.dbo.[rTrialBalanceCompany] </span></strong></p><p>Server = aacarptsrv</p><p>DB= Ace</p><p>Procs = dbo.[rTrialBalanceCompany] </p><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-213430.png" width="308" loading="lazy" src="attachments/2657288210/2658336901.png?width=308" data-image-src="attachments/2657288210/2658336901.png" data-height="219" data-width="308" data-unresolved-comment-count="0" data-linked-resource-id="2658336901" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-213430.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="f0b25610-0ab6-44b2-a1b5-84ac9eee1734" data-media-type="file"></span><p /><h1 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Background:"><strong>Background:</strong></h1><p>JF Update on 13.08.2024:</p><p>from my most recent understanding.</p><p>each month the finance team have a really manully process to compare two sets of data both from DB=<strong>Ace</strong>.</p><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Set1&gt;&gt;"><strong>Set 1 &gt;&gt;</strong> </h3><p>the business users refer it as <strong>“ACE Trial Balance“(SSRS reports) &gt;&gt; what data table it is pulling?</strong></p><p><strong><span style="background-color: rgb(211,241,167);">ace.dbo.[rTrialBalanceCompany] (this sp been locked so i can’t see the logics)</span></strong></p><p>Server = aacarptsrv</p><p>DB= Ace</p><p><strong>Procs = dbo.[rTrialBalanceCompany]</strong></p><p><strong><span style="background-color: rgb(211,241,167);">Please noted this data is also available in the [UnifiedFinanceData] DB</span></strong></p><p>Question: Why Ace Trail balance have multiple occurecrs is the comapny backend datasets?</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">USE UnifiedFinanceData
SELECT TOP (1000) [AsAtDate]
      ,[CompanyID]
      ,[CompanyName]
      ,[BaseCurrency]
      ,[AccountTypeID]
      ,[AccountType]
      ,[AccountID]
      ,[AccountName]
      ,[Currency]
      ,[Debit]
      ,[Credit]
      ,[BaseDebit]
      ,[BaseCredit]
      ,[SnapShotDate]
      ,[StatusFlag]
  FROM [UnifiedFinanceData].[dbo].[AceTrialBalance]</pre>
</div></div><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Set2&gt;&gt;"><strong>Set 2 &gt;&gt;</strong> </h3><p>The business users have a manually updated workbook called “<em>House Positions Raw Data</em>“ want to replaced with automated data pulling process.</p><p><strong>what data table it is pulling?</strong></p><p>Server = aacarptsrv</p><p>DB= Ace</p><p><strong><span style="background-color: rgb(211,241,167);">Procs = dbo.geAcHold</span></strong></p><p /><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Extrastuffrelatedtoasatprice"><strong>Extra stuff related to as at price</strong></h3><p>So business users also requeted the <em><strong>price of the Holdings</strong></em>? </p><p><strong>what data table i could get this from?</strong></p><p>Server = SVSQLCIP\SQLCIP</p><p><em><span style="background-color: rgb(211,241,167);"><u>DB and table name = [UnifiedFinanceData].[dbo].[rptCIPPostion]</u></span></em></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">USE [UnifiedFinanceData]
SELECT TOP (1000) [ExchangeID]
      ,[SecCode]
      ,[Nominal_Quantity]
      ,[AvgCost]
      ,[Price]
      ,[Currency]
      ,[AccountDesk_BookNumber]
      ,[SharesOnIssue]
      ,[symbol]
      ,[SnapShotDate]
      ,[StatusFlag]
  FROM [UnifiedFinanceData].[dbo].[rptCIPPostion]</pre>
</div></div><p>-&gt;&gt; looking at users Spreadhseets:</p><p>they used Vlookup by Excahnge and Security Code to get the price from another excel tab “Bloom1“ &gt;&gt; indicate this is pricing from Bloomberg.</p><p>&gt;&gt; in SQl i could LEFT JOIN ON Excahnge and Security Code</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-223704.png" width="760" loading="lazy" src="attachments/2657288210/2658926621.png?width=760" data-image-src="attachments/2657288210/2658926621.png" data-height="184" data-width="1170" data-unresolved-comment-count="0" data-linked-resource-id="2658926621" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-223704.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="f4fd1e99-7dce-4cd2-b5fb-026614e64792" data-media-type="file"></span><p>User get the “Gain/Loss“ by using <strong>(qty*price(as at date))-Amount</strong></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-224052.png" width="760" loading="lazy" src="attachments/2657288210/2659123237.png?width=760" data-image-src="attachments/2657288210/2659123237.png" data-height="196" data-width="1408" data-unresolved-comment-count="0" data-linked-resource-id="2659123237" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-224052.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="8eeb852e-8d0a-47c8-91f7-dcca9f7e7618" data-media-type="file"></span><p /><hr/><p>Chris Said most of the data i would need is in the SQl SIP [UnifiedFinanceData].</p><p>Just double checking with users where some of the soruce of “Raw Data“ are from.</p><p><strong><span style="background-color: rgb(254,222,200);">Q1:</span></strong></p><p>Regarding your ticket on the House Positions report, where are you currently getting this workbook:</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource image-center" width="722" src="https://craigsip.haloitsm.com/api/attachment/image?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjZhZjlhMzViLTQyZGEtNGY5My04NDYzLWMzOWQyZDgyZjExMCJ9.cntB-RrNE3e233KaRfy0nzTDq3eckD9lrLgwLu6N3J4" data-image-src="https://craigsip.haloitsm.com/api/attachment/image?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjZhZjlhMzViLTQyZGEtNGY5My04NDYzLWMzOWQyZDgyZjExMCJ9.cntB-RrNE3e233KaRfy0nzTDq3eckD9lrLgwLu6N3J4" loading="lazy"></span><p>Are you also getting this from Insights?</p><p> Users Updated said she got the raw data from Ace &gt;&gt; We need to double checks with her which part of Ace she is getting the data from &gt;&gt; we requested a screen shoot from her,</p><p /><p><em><strong>&gt;&gt; Debit and Credit</strong></em></p><ul><li><p>The terms debit (DR) and credit (CR) have Latin roots. Debit comes from the word <em>debitum a</em>nd it means<em>, </em><strong>&quot;what is due.&quot;</strong> Credit comes from <em>creditum</em>, meaning <strong>&quot;something entrusted to another or a loan.&quot;</strong></p></li><li><p>An increase in liabilities or shareholders' equity is a credit to the account. It's notated as &quot;CR.&quot;</p></li><li><p>A decrease in liabilities is a debit that's notated as &quot;DR.&quot;</p></li><li><p>Bookkeepers enter each debit and credit in two places on a company's balance sheet using the double-entry method.</p></li></ul><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-014746.png" width="317" loading="lazy" src="attachments/2657288210/2657484854.png?width=317" data-image-src="attachments/2657288210/2657484854.png" data-height="161" data-width="317" data-unresolved-comment-count="0" data-linked-resource-id="2657484854" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-014746.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="4529a03c-2921-48e9-a92f-67ade6c24899" data-media-type="file"></span><p /><p /><p><strong><span style="background-color: rgb(211,241,167);">Q2:</span></strong></p><p>Then onto the positions, we don't have bid/ask price, we only have a single generic price (that comes through from the Compliance Positions process). Are you happy with just keep this single price?</p><p>the table cotnain this info is called: <em><strong><span style="background-color: rgb(211,241,167);">[UnifiedFinanceData].[dbo].[rptCIPPostion]</span></strong></em></p><p /><p><strong><span style="background-color: rgb(253,208,236);">Q3: </span></strong></p><p>And lastly, are we expected to bring across<em><strong> house positions from both the Chelmer and NZXWT side</strong></em>? At the moment I believe <em><strong>we only look at the positions from the Chelmer side.</strong></em></p><p><em><strong>Chelmer side &gt;&gt; mean look at the chemers portal &gt;&gt; they got a summary for each portfolio Posiiton (Raj showed me that and he sent me some scripts might help)</strong></em></p><p> Users Confirmd that at this stage <em><strong>“We just need the house positions as per the House Positions workbook.  I don't refer to NZXWT and only refer to ACE so it is safe to assume we only need the Chelmer positions.“</strong></em></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-012804.png" width="760" loading="lazy" src="attachments/2657288210/2657648689.png?width=760" data-image-src="attachments/2657288210/2657648689.png" data-height="117" data-width="930" data-unresolved-comment-count="0" data-linked-resource-id="2657648689" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-012804.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="986e5254-4ea4-4085-afed-e5acc5aadd6d" data-media-type="file"></span><p> User Update:</p><p>Finance used &gt;&gt; “Accounting - Account Holdings Enquiry“</p><p>Users said would be amazing to aslo get the [Price] &gt;&gt; which is not in the Source data?</p><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-035238.png" width="632" loading="lazy" src="attachments/2657288210/2657419532.png?width=632" data-image-src="attachments/2657288210/2657419532.png" data-height="464" data-width="632" data-unresolved-comment-count="0" data-linked-resource-id="2657419532" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-035238.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="c538ad2e-3ccf-412c-9863-16f1ca1e406b" data-media-type="file"></span><p /><hr/><p>There are two tickets linked to this report </p><p>Old: CIP0209054 'Portfolio Accounts Holdings' report<br/><a class="external-link" data-card-appearance="inline" href="https://craigsip.haloitsm.com/tickets?area=4&amp;mainview=team&amp;viewid=1&amp;selid=126&amp;sellevel=2&amp;selparentid=data%20team&amp;id=209054" rel="nofollow">https://craigsip.haloitsm.com/tickets?area=4&amp;mainview=team&amp;viewid=1&amp;selid=126&amp;sellevel=2&amp;selparentid=data%20team&amp;id=209054</a> </p><p>New: Portfolio Holding report with changes</p><p><a class="external-link" data-card-appearance="inline" href="https://craigsip.haloitsm.com/tickets?area=4&amp;mainview=team&amp;viewid=1&amp;selid=126&amp;sellevel=2&amp;selparentid=data%20team&amp;id=209056" rel="nofollow">https://craigsip.haloitsm.com/tickets?area=4&amp;mainview=team&amp;viewid=1&amp;selid=126&amp;sellevel=2&amp;selparentid=data%20team&amp;id=209056</a> </p><p /><h1 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Summaryofclient&#39;srequirements:"><strong>Summary of client's requirements:</strong></h1><p><strong>Key words for search:</strong></p><p>ACE to ABEL Monthly Movements - Trial Balance</p><p>CSL6-03 &gt;&gt; ACE to ABEL Monthly Movements - Trial Balance.</p><p><br/> Unified Finance Data &gt;&gt; this is a databased side proejct that build by Chris for fianance &gt;&gt; it is inside SQL CIP &gt;&gt; might be useful</p><p /><h2 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Whattheywant?"><strong>What they want?</strong></h2><p><br/>Finance want to build a New SSRS report called &quot;Portfolio Accounts Holdings&quot; based on their old Excel spreadsheet.<br/>The report are used for monthly reporting.</p><ol start="1"><li><p>- All holdings for all Portfolio accounts with a pre-defined columns structures</p></li></ol><p>Column Structure Include: </p><ul><li><p>Account ID, </p></li><li><p>Account name, </p></li><li><p>Security ID, </p></li><li><p>Security Name, </p></li><li><p>Quantity, </p></li><li><p>Currency, </p></li><li><p>Amount, </p></li><li><p>Exchange, </p></li><li><p>Exchange Security, </p></li><li><p>Price of the security (As at price of the date), </p></li><li><p>Value of the holding (= Qty * At at price of the date)</p></li></ul><p>	</p><ol start="2"><li><p>- All values (in user context mean qty * price of the date) are calculated as per 'Trade date',</p></li></ol><p>Trade date', = last (trading) day of the previous month.</p><p>eg) if I am looking at the report on 2nd Aug, I will see all portfolio holdings as at 31st July 2024.</p><ol start="3"><li><p>- Additional column for transaction date which is 'today's date.  </p></li></ol><p>This will show any trades made as at the last day of the month since the original report (as per CIP:0209054) was created</p><ol start="4"><li><p>Date should be change-able but the default as as per above ( the last day of the month)</p></li></ol><p>&gt;&gt; date should be trasaction date in SSRS and build the Parametes fro users to choose which date, default the date slection to the ( the last day of the month)</p><p /><ol start="5"><li><p>This report is to assist with the following current process:</p></li></ol><p>&gt;&gt; I think they compare <em><strong>Ace  to Able trail balnace</strong></em> <em><strong><u>(which the raw data is a SSRS pull out from ACE Trail Balance)</u></strong></em> with the <em><strong>Raw Data excel spreasheet</strong></em> (<u>aacarptsrv.Ace.</u><strong><span style="background-color: rgb(211,241,167);"><u>dbo.geAcHold</u></span></strong>)</p><blockquote><p>If Ace to Able does not match Raw Data:</p><p><u>If the subtotal doesn’t agree to the corresponding entry in the “Raw Data &lt;current month&gt;” sheet, there will have been </u><strong><span style="background-color: rgb(254,222,200);"><u>some adjustments to holdings subsequent to the “ACE to ABEL Trial Balance” </u></span></strong><u>transfer being completed. It is necessary to find those transactions and </u><span style="background-color: rgb(254,222,200);"><u>back them out of the holdings </u></span><u>so that the holdings agree to the balance in the “Raw Data &lt;current month&gt;” sheet. </u></p></blockquote><p>Ace is the Chelmers services</p><p>Raw data?? &gt;&gt; what raw data from where &gt;&gt; “Raw Data &lt;current month&gt;” sheet &gt;&gt; this Sheet is actually an extract from the Ace Data base using a Stroe procs named: <u>aacarptsrv.Ace.</u><strong><span style="background-color: rgb(211,241,167);"><u>dbo.geAcHold</u></span></strong></p><p /><ol start="6"><li><p>For ACE Raw data for Account Holdings</p></li></ol><p>In ACE</p><p>	a.       <strong><span style="background-color: rgb(211,241,167);">Accounting  &gt; Account Transaction Enquiry &gt;&gt;&gt; this is actually the </span></strong>aacarptsrv.Ace.<strong><span style="background-color: rgb(211,241,167);">dbo.geAcHold we used, the user was using the Ace interface to query data.</span></strong></p><p>but in the backend we could do the similar.</p><p>below are the users UI instruction</p><p>                                                             i.           Input the ‘Account ID’as above, </p><p>                                                            ii.           Enter the currency in question.</p><p>                                                          iii.           Input ‘As At Date’ as the last day of the previous month</p><p>                                                          iv.           Input the “Transaction Date” as the current date. </p><p>The output from this query should show you any transactions that were backdated, <em><strong><span style="background-color: rgb(211,241,167);">and therefore reconcile your imbalance.</span></strong></em></p><p>&gt;&gt;* i think what user mean in here by comapring the Ace Account Holdings and the Ace Company Trail balance table we could Reconcile the Imbalance?</p><h2 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Whentheywantit?">When they want it?  </h2><p>End of this month</p><h2 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-DataSources?">Data Sources?</h2><p>Ace and ABLE and Unified Finance Data </p><h2 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-DowehaveaSQLscripts?">Do we have a SQL scripts?</h2><p>Yes &gt;&gt; ACE Trial Balance is the Base</p><p /><hr/><h1 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-ExploringACETrialBalance">Exploring ACE Trial Balance</h1><p>they used Dynamic SQL to execute a store Porcs = Proc: <strong><span style="background-color: rgb(211,241,167);">ace.dbo.[rTrialBalanceCompany]</span></strong></p><p>Server = aacarptsrv</p><p>databse = ace</p><p>sp name = <strong><span style="background-color: rgb(211,241,167);">ace.dbo.[rTrialBalanceCompany] &gt;&gt; this SP have been locked i can not see its logics</span></strong></p><p>i could execute the SP and confirmed the columns struture is the same as the dataservices  <em><strong>#trialBalanceCurrent</strong></em></p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-023309.png" width="544" loading="lazy" src="attachments/2657288210/2657222799.png?width=544" data-image-src="attachments/2657288210/2657222799.png" data-height="157" data-width="544" data-unresolved-comment-count="0" data-linked-resource-id="2657222799" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-023309.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="9399db86-b7e1-4021-ad48-106e755e88fc" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-024450.png" width="760" loading="lazy" src="attachments/2657288210/2657550409.png?width=760" data-image-src="attachments/2657288210/2657550409.png" data-height="405" data-width="885" data-unresolved-comment-count="0" data-linked-resource-id="2657550409" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-024450.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="37d8ffc4-2036-4079-a047-84fd496023b6" data-media-type="file"></span><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-023214.png" width="760" loading="lazy" src="attachments/2657288210/2657943684.png?width=760" data-image-src="attachments/2657288210/2657943684.png" data-height="133" data-width="1022" data-unresolved-comment-count="0" data-linked-resource-id="2657943684" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-023214.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="0c11ade7-17c4-4836-a511-5d141de9996a" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-023151.png" width="760" loading="lazy" src="attachments/2657288210/2657222793.png?width=760" data-image-src="attachments/2657288210/2657222793.png" data-height="119" data-width="1029" data-unresolved-comment-count="0" data-linked-resource-id="2657222793" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-023151.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="e4ee8452-a788-4d8e-b770-1fdd84dab434" data-media-type="file"></span><p>The Dynamic SQL was executed using EXEC sp_executesql @DynamicSQL;</p><p>Then the out put of the SP would be insert into an temp table called&gt;&gt; #trialBalanceCurrent</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-023630.png" width="195" loading="lazy" src="attachments/2657288210/2657845295.png?width=195" data-image-src="attachments/2657288210/2657845295.png" data-height="228" data-width="195" data-unresolved-comment-count="0" data-linked-resource-id="2657845295" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-023630.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="953628c1-72b7-4350-bc34-01866d7c6374" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-023409.png" width="492" loading="lazy" src="attachments/2657288210/2657615936.png?width=492" data-image-src="attachments/2657288210/2657615936.png" data-height="505" data-width="492" data-unresolved-comment-count="0" data-linked-resource-id="2657615936" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-023409.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="f9ea9ae6-42dc-4590-8c8d-f59f2ead8c5b" data-media-type="file"></span><p>&gt;&gt;FROM #results r out put table part have bneen added three where clasues so users could passed in SSRS paramers for </p><p>@IsZeroBalance, </p><p>@AccountType (Account type in SSRS was set up as a concatenated List)</p><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-030633.png" width="652" loading="lazy" src="attachments/2657288210/2657845308.png?width=652" data-image-src="attachments/2657288210/2657845308.png" data-height="331" data-width="652" data-unresolved-comment-count="0" data-linked-resource-id="2657845308" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-030633.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="82694d53-5a37-4ce4-a16a-2fab883b33e8" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-030420.png" width="381" loading="lazy" src="attachments/2657288210/2657779765.png?width=381" data-image-src="attachments/2657288210/2657779765.png" data-height="323" data-width="381" data-unresolved-comment-count="0" data-linked-resource-id="2657779765" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-030420.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="1f15b1e7-27f3-4a79-89a1-7d2955aa6d33" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-031228.png" width="760" loading="lazy" src="attachments/2657288210/2657321077.png?width=760" data-image-src="attachments/2657288210/2657321077.png" data-height="335" data-width="845" data-unresolved-comment-count="0" data-linked-resource-id="2657321077" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-031228.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="4d7a7cfb-07c4-4373-8125-2dbbb9432261" data-media-type="file"></span><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-HistoryandContext">History and Context</h3><ol start="1"><li><p><strong>Early SQL Versions</strong>: In earlier versions of SQL Server, there was no built-in function to split strings. Developers often had to resort to complex methods using loops, cursors, or recursive queries to achieve similar functionality.</p></li><li><p><strong>User-Defined Functions</strong>: As SQL Server evolved, developers began creating user-defined functions to encapsulate the logic for string splitting. <span style="background-color: rgb(211,241,167);">The </span><code>dbo.split</code><span style="background-color: rgb(211,241,167);"> function is an example of such a UDF, where </span><code>dbo</code><span style="background-color: rgb(211,241,167);"> refers to the schema (usually the default schema for user-defined objects).</span></p></li><li><p><strong>Common Implementations</strong>: The implementation of <code>dbo.split</code> typically involves:</p><ul><li><p>Taking a string input and a delimiter.</p></li><li><p>Using a loop or a recursive method to parse the string.</p></li><li><p>Returning the results as a table, often with each split value in a separate row.</p></li></ul></li><li><p><strong>SQL Server 2016 and Later</strong>: Starting with SQL Server 2016, Microsoft introduced the <code>STRING_SPLIT</code> function, which provides a built-in way to split strings. This function simplifies the process and improves performance compared to custom UDFs.</p></li><li><p><strong>Continued Use of UDFs</strong>: Despite the availability of <code>STRING_SPLIT</code>, many developers still use custom UDFs like <code>dbo.split</code> for specific use cases, especially if they need additional functionality or specific formatting.</p></li></ol><hr/><h1 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-ExploringtheHousePositionsReport-DailySubscriptions-SQLscripts">Exploring the House Positions Report - Daily Subscriptions - SQL scripts</h1><p>This is a scripts that focsu on NZXWT API extract using Dynamics SQL.</p><p>step 1 is to define the API endpoint</p><p>SET @api = '/api/v1/PortfolioReporting/HoldingsStatement?sourceSystemGuid=' + @varguid + '&amp;reportEndDate=' + @reportEndDateText + '&amp;reportCurrencyCode=' + @reportCurrencyCode;</p><p>Step 2 is to Execute [dbo].[usp_NZXWT_API] to get the json put put</p><p><strong><span style="background-color: rgb(254,222,200);">It deosn’t seems to have anything to do with Chelmers and ACE so i stop here</span></strong></p><p /><hr/><p> Imran sent through the Ace Holdings Code</p><p>Server = aacarptsrv</p><p>Database = Ace</p><p>USE ace<br/>GO</p><p>exec geAcHold<br/>NULL,<br/>    'FXARB',<br/>    NULL,<br/>    NULL,<br/>    NULL,<br/>    NULL,<br/>    '2024/05/31',<br/>    NULL,<br/>    NULL,<br/>    NULL,<br/>    NULL,<br/>    NULL,<br/>    NULL,<br/>    NULL,<br/>    NULL,<br/>    'N'</p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240812-044126.png" width="338" loading="lazy" src="attachments/2657288210/2657976361.png?width=338" data-image-src="attachments/2657288210/2657976361.png" data-height="343" data-width="338" data-unresolved-comment-count="0" data-linked-resource-id="2657976361" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240812-044126.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="642e40d8-fc91-4d4b-b3ea-af1339585220" data-media-type="file"></span><p /><hr/><p>Dev For Work Scipts:</p><p>technical point:</p><p>if i want to passed in a list of AccountsIds, i could use temp table and Coursor to achieve that.</p><p>as at 26.08.2024 <span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="attachments/2657288210/2681143316.sql" data-nice-type="null" data-file-src="/wiki/download/attachments/2657288210/Work%20Spcripts%205%20-%20putting%20price%20and%20holding%20together.sql?version=1&amp;modificationDate=1724626633632&amp;cacheVersion=1&amp;api=v2" data-linked-resource-id="2681143316" data-linked-resource-type="attachment" data-linked-resource-container-id="2657288210" data-linked-resource-default-alias="Work Spcripts 5 - putting price and holding together.sql" data-mime-type="binary/octet-stream" data-has-thumbnail="true" data-linked-resource-version="1" data-media-id="b835b83a-4cf3-454a-93a4-b71b0b65f070" data-media-type="file"><img src="attachments/thumbnails/2657288210/2681143316" height="250"/></a></span> </p><p /><p /><hr/><h1 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Continueasat26.08.2024"><strong>Continue as at 26.08.2024</strong></h1><p>Background: Caroline sent through a few checks and also provide good feeback. she is on leave for one week.</p><ol start="1"><li><p>Enhance the report by mapping prices correctly based on the type of position (long/short).</p></li><li><p>Implement additional data validation and reconciliation processes to ensure alignment with external sources and internal procedural steps.</p></li><li><p>Modify or add columns (like transaction date) and make date selection flexible while maintaining a default setting for ease of use.</p></li><li><p>Ensure self-service capabilities<strong> are robust and user-friendly</strong>, allowing business users to generate reports with accurate and meaningful data without extensive manual intervention.</p></li></ol><p>&gt;&gt; she sent through the actual monthly manual process might help me udnerstand more .(Only at step 13)</p><p>Here’s a simplified breakdown of the steps involved in the House Positions process:</p><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-HousePositionsProcessOverview:">House Positions Process Overview:</h3><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-1.HousePositions–RawData">1. <strong>House Positions – Raw Data</strong></h4><ul><li><p>Refer to the &quot;House Positions – Raw Data&quot; notes.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-2.PrivateEquities">2. <strong>Private Equities</strong></h4><ul><li><p>Update Private Equities before starting the House Positions process.</p></li><li><p>Ensure the 9210 balance equals zero after posting the NZD, USD, and exchange rate journals.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-3.HousePositionsWorkbook">3. <strong>House Positions Workbook</strong></h4><ul><li><p>Roll over the previous month’s sheet, save it as the current month, and rename it accordingly.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-4.FXInput">4. <strong>FX Input</strong></h4><ul><li><p><em><strong><span style="background-color: rgb(254,222,200);">Update the exchange rates.</span></strong></em></p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-5.BloombergData(Bloom1&amp;Bloom2Tabs)">5. <strong>Bloomberg Data (Bloom1 &amp; Bloom2 Tabs)</strong></h4><ul><li><p>Update the Bloomberg template with the last business day of the previous month.</p></li><li><p>Login to Bloomberg, refresh data, and update the monthly folder.</p></li><li><p>Copy the necessary data into the House Positions sheet and check formulas.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Bloom1">Bloom1</h4><ul><li><p><strong>Purpose</strong>: This tab is likely used to store and analyze the primary data retrieved from Bloomberg. It serves as the main working area where you will input and manipulate the data.</p></li><li><p><strong>Data Source</strong>: The data in this tab is directly pulled from the Bloomberg terminal, which provides real-time financial information.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Bloom2">Bloom2</h4><ul><li><p><strong>Purpose</strong>: This tab is likely used to isolate and analyze specific securities that meet certain criteria, in this case, those that have been filtered to show<strong> “Hold Type“ &quot;NO&quot;</strong> in Column M.</p></li><li><p><strong>Data Management</strong>: By copying the <strong> “Hold Type“ </strong>&quot;NO&quot; entries into Bloom2, you can focus on a subset of data that may require further analysis or action, such as looking up securities with #N/A values.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-6.MyStartTab">6. <strong>MyStart Tab</strong></h4><ul><li><p>Update links to the current month’s MyStart House positions sheet.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-7.OtherAceAccounts">7. <strong>Other Ace Accounts</strong></h4><ul><li><p>Update the Ace to Abel Trial Balance link.</p></li><li><p>Refresh filters and ensure totals match before posting journals.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-8.CustodialPositionDetail">8. <strong>Custodial Position Detail</strong></h4><ul><li><p>Roll over the previous month’s Holding Report.</p></li><li><p>Update links and data from Fusion and other sources.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-9.PrivateEquities(Formerly228553)">9. <strong>Private Equities (Formerly 228553)</strong></h4><ul><li><p>Roll over the Private Equities sheet and update it with the latest data from Fusion.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-10.IXARB">10. <strong>IXARB</strong></h4><ul><li><p>Update IXARB data and ensure formulas are correct.</p></li><li><p>Make necessary journal entries for Smartshares values.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-11.UnlistedTab">11. <strong>Unlisted Tab</strong></h4><ul><li><p>Update data from the NZUL/NZUT tabs and check all links.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-12.FITRADINGTab(FixedInterest:9016)">12. <em><strong><span style="background-color: rgb(254,222,200);">FITRADING Tab (Fixed Interest: 9016)</span></strong></em></h4><ul><li><p>Remove rounding values, update links, and update the FITRADING data.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-13.NZEquities"><em><span style="background-color: rgb(211,241,167);">13. </span><strong><span style="background-color: rgb(211,241,167);">NZ Equities</span></strong></em></h4><ul><li><p><em><span style="background-color: rgb(211,241,167);">Update the NZ Equities tab, check formulas, and ensure </span><strong><span style="background-color: rgb(211,241,167);">manual updates for values with #N/A.</span></strong></em></p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-14.ForeignEquities&amp;FixedIncome">14. <strong>Foreign Equities &amp; Fixed Income</strong></h4><ul><li><p>Update from peach data in the raw data sheet, ensuring correct data links.</p></li></ul><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-JournalEntries:"><strong>Journal Entries:</strong></h3><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-15.9016FixedIncomeRevaluationJournal">15. <strong>9016 Fixed Income Revaluation Journal</strong></h4><ul><li><p>Ensure the GL balance equals the FITRADING tab’s balance before posting the revaluation journal.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-16.9015RevaluationJournal">16. <strong>9015 Revaluation Journal</strong></h4><ul><li><p>Update links and check that all balances match before posting.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-17.ReclassificationJournal">17. <strong>Reclassification Journal</strong></h4><ul><li><p>Create and post the reclassification journal, ensuring the F Account reconciliation matches.</p></li><li><p /></li></ul><hr/><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-**ChrisAFiguredoutthelogicsofAceTrasactionsbutnotreallytheAcHold">** Chris A Figured out the logics of Ace Trasactions but not really the AcHold </h3><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-EXEC[AACARPTSRV].[ace].dbo.geAcHold"><strong><span style="background-color: rgb(254,222,200);">EXEC [AACARPTSRV].[ace].dbo.geAcHold</span></strong></h3><p><a href="https://craigsip.atlassian.net/wiki/spaces/DAC/pages/2284191817/House+Positions+Extract" data-linked-resource-id="2284191817" data-linked-resource-version="3" data-linked-resource-type="page">House Positions Extract</a> </p><p>House Positions in human language &gt;&gt; there a list of House Accoutns in the Ace databse </p><p><code>where /* ( t.AccID in ( 'ERROS', 'OMJOINT_WSSM', 'OMKEITHF', 'OMSTUARTH', 'OMJOINT_JMAD', 'OMHAMISHC', 'OMJOINT_JLMW', 'OMBRENTS', 'OMNEILC', 'FACILITATION', 'FACW', 'FITRADING', 'FXARB', 'HEADOFFICE', 'IXARB', 'IXTRADING', 'TRADING', 'TRADINGW', 'VWAP', 'RVPFCG', 'RVPFSF', 'CANCCROSS', 'RPLTA', 'RPLIA', 'RPLTF', 'RPLT', 'RPLFIT', 'RPLTFW', 'RPLTW', 'RPLVW' ) OR t.AccID like 'OM%' )</code></p><p>--I would need to find out where did Caroline get the price data. she said it is a copy paste from the Bloomberg terminal, but i don’t think we have the exact same data history in our  SQLCIP &gt;&gt; bloomberg database, we have ASK price and BID price missing, i think we only regiter LAST price.</p><p /><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-ResearchingintoBloombergprice:">Researching into Bloomberg price:</h3><p>Important links:</p><p><a href="https://craigsip.atlassian.net/wiki/spaces/BLOOM">https://craigsip.atlassian.net/wiki/spaces/BLOOM</a> </p><p><a href="https://craigsip.atlassian.net/wiki/spaces/BLOOM/pages/256868363/Pricing+Automation+Bloomberg" data-linked-resource-id="256868363" data-linked-resource-version="10" data-linked-resource-type="page">Pricing Automation (Bloomberg)</a> </p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240826-021300.png" width="760" loading="lazy" src="attachments/2657288210/2681143366.png?width=760" data-image-src="attachments/2657288210/2681143366.png" data-height="520" data-width="1261" data-unresolved-comment-count="0" data-linked-resource-id="2681143366" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240826-021300.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="b4542b95-b451-45af-b4de-4b4616475f35" data-media-type="file"></span><p><a class="external-link" href="https://kapsqlrpt-prd01.craigsip.com/Reports/report/Assets%20and%20Securities/NZXWT%20vs%20ARM%20Reconciliation%20Report" rel="nofollow">https://kapsqlrpt-prd01.craigsip.com/Reports/report/Assets and Securities/NZXWT vs ARM Reconciliation Report</a></p><p /><p>there is a SSRS report get prices from Chelmer ARM (Asset Register maintnenece) compared it with NZXWT system, sometimes these two price don’t match.</p><hr/><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-ChelmerConceptsDefinitions">Chelmer Concepts Definitions</h3><ol start="1"><li><p><strong>House Accounts</strong>: A list of operational accounts from Chelmer used by the CIP (Client Investment Platform) for various purposes. These accounts are not associated with individual humans.</p></li><li><p><strong>House Positions</strong>: A snapshot at a specific date level showing the buying and selling activity of House Accounts. This provides insight into the trading activity over a defined period.</p></li><li><p><strong>Holdings</strong>: A presentation or summary that displays the balances of accounts, including all securities and cash. It reflects the net result of transactions over time. For example, if an account was opened on 01/06/2024, and various transactions occurred, the Holdings as of 26/08/2024 would show the current balance, such as 2000 NZD in MSFT.</p></li><li><p><strong>Transactions</strong>: Records of actual buy and sell actions at a date level, including details such as transaction date (bh.TransDate) and types of transactions (e.g., buying, selling, corporate actions like dividends). Each transaction impacts the Holdings.</p></li></ol><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-RelationshipBetweenTransactionsandHoldings">Relationship Between Transactions and Holdings</h3><ul><li><p><strong>Transactions</strong>: Capture every individual buy and sell action.</p></li><li><p><strong>Holdings</strong>: Provide a consolidated view of the net result of those transactions. Holdings are derived from Transactions through a process of summation and aggregation.</p></li></ul><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-ExampleofTransactionImpactonHoldings">Example of Transaction Impact on Holdings</h3><ul><li><p>Buy 100</p></li><li><p>Buy 50</p></li><li><p>Buy 100</p></li><li><p>Sell 50</p></li><li><p>Sell 20</p></li></ul><p><strong>Holdings = 180</strong></p><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-AdditionalNotes">Additional Notes</h3><ul><li><p>Transactions can also include corporate actions, fees, or rebates, all of which can impact the Holdings.</p></li><li><p>These definitions can be added to the data dictionary for future reference. </p></li></ul><p>For further details, please refer to the <a href="https://craigsip.atlassian.net/wiki/spaces/DAC/pages/1837432982/Data+Dictionary" data-linked-resource-id="1837432982" data-linked-resource-version="16" data-linked-resource-type="page">Data Dictionary</a>.</p><p /><p /><hr/><h2 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Continueon28.08.2024-HandlingandValidatingBloombergPriceData"><strong>Continue on 28.08.2024 - Handling and Validating Bloomberg Price Data</strong></h2><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Purpose"><strong>Purpose</strong></h3><p>This article outlines the approach taken to address missing Bloomberg price data in our SQL database, methods for cross-comparing manually retrieved data (from bloom berg terminals at month end), and strategies for ensuring data accuracy in financial reporting.</p><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-ProblemStatement:">Problem Statement:</h3><ul><li><p><strong>Manual Data Retrieval from finance team at month end:</strong> our current system does not capture all Bloomberg price data (PX_ASK, PX_BID, PX_LAST) from SQL CIP but some  PX_BID, PX_LAST data are available in fusion.</p></li><li><p>Users manually retrieve this data from Bloomberg terminal and paste it into Excel sheets (Bloom1, Bloom2) for use in financial reports.</p></li><li><p><strong>Business Impact:</strong> Missing or inaccurate price data can lead to incorrect market valuations and potentially affect decision-making.</p></li></ul><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-KeyAreasofWork"><strong>Key Areas of Work</strong></h3><p><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="attachments/2657288210/2684846100.sql" data-nice-type="null" data-file-src="/wiki/download/attachments/2657288210/Check%20Bloomberg%20price%20vs%20Fusion%20Price%20vs%20Bloom1%20excel%20with%20BB%20Code.sql?version=1&amp;modificationDate=1724803254692&amp;cacheVersion=1&amp;api=v2" data-linked-resource-id="2684846100" data-linked-resource-type="attachment" data-linked-resource-container-id="2657288210" data-linked-resource-default-alias="Check Bloomberg price vs Fusion Price vs Bloom1 excel with BB Code.sql" data-mime-type="binary/octet-stream" data-has-thumbnail="true" data-linked-resource-version="1" data-media-id="41bac769-33f9-42fc-ab4b-372c1b3ea749" data-media-type="file"><img src="attachments/thumbnails/2657288210/2684846100" height="250"/></a></span>   </p><ol start="1"><li><p><strong>Spot-Checking Prices:</strong></p><ul><li><p><strong>Objective:</strong> Manually compare specific Bloomberg <code>BB CODE</code> values between the Excel sheets and the SQL database.</p></li><li><p><strong>Approach:</strong> SQL scripts were developed to retrieve and compare <code>PX_ASK</code>, <code>PX_BID</code>, and <code>PX_LAST</code> prices for specific securities.</p></li></ul></li><li><p><strong>Comprehensive Data Comparison:</strong></p><ul><li><p><strong>Objective:</strong> Ensure all <code>BB CODE</code> values in the Excel sheet have corresponding and accurate data in the SQL database.</p></li><li><p><strong>Approach:</strong> All <code>BB CODE</code> values were loaded into a temporary SQL table. A comprehensive comparison script was used to identify any discrepancies or missing data.</p></li></ul></li></ol><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-SQLScriptsProvided"><strong>SQL Scripts Provided</strong></h3><ul><li><p><strong>Spot-Check Script:</strong> For quick verification of individual <code>BB CODE</code> prices.</p></li><li><p><strong>Comprehensive Comparison Script:</strong> For a full review of all <code>BB CODE</code> values and corresponding prices.</p></li></ul><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Conclusion:"><strong>Conclusion:</strong></h3><p>We are missing price vs. bloomberg terminals.</p><p>checked bloombergDB we are missing price</p><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240827-235337.png" width="760" loading="lazy" src="attachments/2657288210/2684878863.png?width=760" data-image-src="attachments/2657288210/2684878863.png" data-height="953" data-width="1581" data-unresolved-comment-count="0" data-linked-resource-id="2684878863" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240827-235337.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="e87021b4-479a-4eba-b47a-779253a23138" data-media-type="file"></span><p /><p>Checked Fusion DB we have amost of the price</p><p /><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" alt="image-20240827-235302.png" width="760" loading="lazy" src="attachments/2657288210/2684846094.png?width=760" data-image-src="attachments/2657288210/2684846094.png" data-height="908" data-width="1141" data-unresolved-comment-count="0" data-linked-resource-id="2684846094" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20240827-235302.png" data-base-url="https://craigsip.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2657288210" data-linked-resource-container-version="16" data-media-id="7f1fd5a0-4251-4079-9019-12e2591a53ed" data-media-type="file"></span><p /><p>need to be samrt about how to communciatte with business users</p><p>yeah in a gist</p><ol start="1"><li><p>we don't have all the price</p></li><li><p>they getting price manually</p></li><li><p>so don't be surprise if price different</p></li></ol><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-----03.09.2024-lastavailablepricefindingstechniques"> ----03.09.2024 - last available price findings techniques</h3><p>Let's review the three techniques in detail, focusing on their pros, cons, and the optimization opportunities. After that, I'll provide the most optimized query for retrieving the last available <code>PX_ASK_EOD</code> value.</p><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Technique1:UsingaCommonTableExpression(CTE)withROW_NUMBER">Technique 1: Using a Common Table Expression (CTE) with <code>ROW_NUMBER</code></h3><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Query:">Query:</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: sql; gutter: false; theme: Confluence" data-theme="Confluence">DECLARE @AsAtDate2 DATE = &#39;2024-07-31&#39;;

WITH PriceHistory AS (
    SELECT DISTINCT
        H.BloombergCode,
        H.PX_ASK_EOD,
        H.PX_BID,
        H.AsAtDate,
        H.PX_LAST,
        H.SecurityPrice,
        ROW_NUMBER() OVER (
            PARTITION BY H.BloombergCode 
            ORDER BY H.AsAtDate DESC
        ) AS RowNum
    FROM 
        [SQLCIP].[Bloomberg].[dbo].[History] AS H
    WHERE 
        H.PX_ASK_EOD IS NOT NULL
        AND H.AsAtDate BETWEEN DATEADD(DAY, -7, @AsAtDate2) AND @AsAtDate2
)
SELECT DISTINCT
    PH.BloombergCode,
    PH.PX_ASK_EOD,
    PH.PX_BID,
    PH.AsAtDate,
    PH.PX_LAST,
    PH.SecurityPrice
FROM 
    PriceHistory AS PH
WHERE 
    PH.RowNum = 1
    AND PH.BloombergCode = &#39;USM NZ Equity&#39;;</pre>
</div></div><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Pros:">Pros:</h4><ul><li><p><strong>Flexibility</strong>: The CTE can be easily extended to include additional logic or filters.</p></li><li><p><strong>Row Filtering</strong>: <code>ROW_NUMBER()</code> ensures that you get the most recent record for each <code>BloombergCode</code>.</p></li><li><p><strong>Readable</strong>: The query is well-structured and easy to follow.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Cons:">Cons:</h4><ul><li><p><strong>Performance</strong>: <code>ROW_NUMBER()</code> can be expensive, especially on large datasets.</p></li><li><p><strong>Complexity</strong>: The use of a CTE and <code>ROW_NUMBER()</code> might be overkill if you only need the last available price.</p></li><li><p><strong>Distinct</strong>: Using <code>DISTINCT</code> can add unnecessary overhead, especially if there’s already a uniqueness guarantee.</p></li></ul><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Technique2:TOP1withORDERBY">Technique 2: <code>TOP 1</code> with <code>ORDER BY</code></h3><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Query:.1">Query:</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: sql; gutter: false; theme: Confluence" data-theme="Confluence">SELECT TOP 1 H.PX_ASK_EOD
FROM [SQLCIP].[Bloomberg].[dbo].[History] AS H
WHERE 
    H.AsAtDate BETWEEN DATEADD(DAY, -7, &#39;2024-07-31&#39;) AND &#39;2024-07-31&#39;
    AND H.BloombergCode = &#39;USM NZ Equity&#39;
    AND H.PX_ASK_EOD IS NOT NULL
ORDER BY H.AsAtDate DESC;</pre>
</div></div><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Pros:.1">Pros:</h4><ul><li><p><strong>Simplicity</strong>: This is the simplest and most direct approach.</p></li><li><p><strong>Performance</strong>: The <code>TOP 1</code> with <code>ORDER BY</code> is optimized for retrieving a single record.</p></li><li><p><strong>Clarity</strong>: Easy to read and understand.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Cons:.1">Cons:</h4><ul><li><p><strong>Scalability</strong>: If you need more complex filtering or multiple <code>BloombergCode</code>s, this approach can become less manageable.</p></li><li><p><strong>Limited Context</strong>: This approach works only for single <code>BloombergCode</code> queries, making it less versatile in broader use cases.</p></li></ul><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Technique3:MAXwithINNERJOIN">Technique 3: <code>MAX</code> with <code>INNER JOIN</code></h3><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Query:.2">Query:</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: sql; gutter: false; theme: Confluence" data-theme="Confluence">SELECT DISTINCT 
    PH.BloombergCode, 
    PH.PX_ASK_EOD, 
    PH.AsAtDate
FROM [SQLCIP].[Bloomberg].[dbo].[History] AS PH
INNER JOIN (
    SELECT 
        MAX(H.AsAtDate) AS AsAtDate, 
        H.BloombergCode
    FROM [SQLCIP].[Bloomberg].[dbo].[History] AS H
    WHERE 
        H.AsAtDate BETWEEN DATEADD(DAY, -7, &#39;2024-07-31&#39;) AND &#39;2024-07-31&#39;
        AND H.BloombergCode = &#39;USM NZ Equity&#39;
        AND H.PX_ASK_EOD IS NOT NULL
    GROUP BY 
        H.BloombergCode
) MPR
ON MPR.BloombergCode = PH.BloombergCode
   AND MPR.AsAtDate = PH.AsAtDate;</pre>
</div></div><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Pros:.2">Pros:</h4><ul><li><p><strong>Accuracy</strong>: Ensures that you get the correct record by explicitly joining on the latest date.</p></li><li><p><strong>Versatility</strong>: This approach can handle more complex queries and multiple securities.</p></li></ul><h4 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Cons:.2">Cons:</h4><ul><li><p><strong>Complexity</strong>: Involves more steps and joins, which might be unnecessary for simple queries.</p></li><li><p><strong>Performance</strong>: The <code>INNER JOIN</code> on the maximum date can be slower, especially with large datasets.</p></li><li><p><strong>Use of DISTINCT</strong>: <code>DISTINCT</code> can add unnecessary overhead, especially if uniqueness is already maintained.</p></li></ul><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-OptimizedQuery">Optimized Query</h3><p>Given the simplicity and performance considerations, the most optimized query to retrieve the last available <code>PX_ASK_EOD</code> value is the <code>TOP 1</code> approach. However, to generalize it slightly and make it more versatile (without sacrificing performance), I suggest using a small modification:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: sql; gutter: false; theme: Confluence" data-theme="Confluence">SELECT TOP 1 
    H.BloombergCode, 
    H.PX_ASK_EOD, 
    H.AsAtDate
FROM 
    [SQLCIP].[Bloomberg].[dbo].[History] AS H
WHERE 
    H.BloombergCode = &#39;USM NZ Equity&#39;
    AND H.PX_ASK_EOD IS NOT NULL
    AND H.AsAtDate &lt;= &#39;2024-07-31&#39;
ORDER BY 
    H.AsAtDate DESC;</pre>
</div></div><h3 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-SummaryofOptimizations:">Summary of Optimizations:</h3><ul><li><p><strong>Removed unnecessary </strong><code>DISTINCT</code>: As we're selecting only the top 1 record, no need for <code>DISTINCT</code>.</p></li><li><p><strong>Generalized Date Filter</strong>: The filter now simply ensures that the date is less than or equal to <code>@AsAtDate2</code> rather than using a fixed range, which allows for more flexibility.</p></li><li><p><strong>Simplicity</strong>: The query remains as simple as possible while achieving the goal efficiently. </p></li></ul><p>This approach should perform well and is easy to maintain and understand.</p><p /><p>SELECT DISTINCT TOP 1000<br/>    H.BloombergCode,<br/>    COALESCE(<br/>        (SELECT TOP 1 PX_ASK_EOD<br/>         FROM [SQLCIP].[Bloomberg].[dbo].[History]<br/>         WHERE BloombergCode = H.BloombergCode<br/>           AND PX_ASK_EOD IS NOT NULL<br/>           AND AsAtDate &lt;= '2024-07-31'<br/>         ORDER BY AsAtDate DESC),<br/>        H.PX_ASK_EOD<br/>    ) AS PX_ASK_EOD,<br/>    H.PX_BID_EOD,<br/>    H.PX_LAST_EOD,<br/>    H.AsAtDate,<br/>    a.code AS [ExchangeSecurity],<br/>    a.dataProviderID AS AssetDataProviderID,<br/>    a.status AS AssetStatus,<br/>    e.code AS [ExchangeID],<br/>    e.name AS ExchangeName,<br/>    e.status AS ExchangeStatus<br/>FROM<br/>    [SQLCIP].[Bloomberg].[dbo].[History] AS H<br/>INNER JOIN<br/>    [AACARPTSRV].[fusion].[dbo].[AssetDpMap] AS AssetMap<br/>    ON H.BloombergCode = AssetMap.dpAssetID COLLATE Database_Default<br/>    AND AssetMap.dataProviderID = 29 -- Link between Fusion and Bloomberg</p><p>INNER JOIN  <br/>    [AACARPTSRV].[fusion].[dbo].[Asset] AS a<br/>    ON a.assetID = AssetMap.assetID<br/>    AND a.status = 1</p><p>INNER JOIN<br/>    [AACARPTSRV].[fusion].[dbo].[Exchange] AS e<br/>    ON e.exchangeID = a.exchangeID<br/>    AND e.status = 1 -- Join with Exchange to get Exchange details</p><p>WHERE<br/>    H.AsAtDate = '2024-07-31'<br/>    AND H.BloombergCode LIKE '%NZ Equity%'<br/>ORDER BY<br/>    H.AsAtDate DESC;</p><h2 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Instructions"><img class="emoticon emoticon-blue-star" data-emoji-id="1f4d8" data-emoji-shortname=":blue_book:" data-emoji-fallback="\uD83D\uDCD8" src="images/icons/emoticons/72/1f4d8.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)"/> Instructions</h2><p></p><ol start="1"><li><p></p></li><li><p></p></li><li><p></p></li></ol><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Highlight important information in a panel like this one. To edit this panel's color or style, select one of the options in the menu.</p></div></div><h2 id="id-06.PortfolioAccountsHoldingsforCarolinefromFinanceDevnote-Relatedarticles"><img class="emoticon emoticon-blue-star" data-emoji-id="1f4cb" data-emoji-shortname=":clipboard:" data-emoji-fallback="\uD83D\uDCCB" src="images/icons/emoticons/72/1f4cb.png" width="16" height="16" data-emoticon-name="blue-star" alt="(blue star)"/> Related articles</h2><p></p>











    
    <ul class="content-by-label">
        <li>
        <div>
                <span class="icon aui-icon content-type-page" title="Page">Page:</span>        </div>

        <div class="details">
                                <a data-linked-resource-id="3021504564" data-linked-resource-type="page" data-linked-resource-version="3" href="/wiki/spaces/~712020244e9c4c47d24365b81565be06aae4c6/pages/3021504564/Power+BI+Dynamic+Subscriptions+Set+Up+Guide">Power BI Dynamic Subscriptions Set Up Guide</a>
                        
                        
                    </div>
    </li>
        <li>
        <div>
                <span class="icon aui-icon content-type-page" title="Page">Page:</span>        </div>

        <div class="details">
                                <a data-linked-resource-id="2698248202" data-linked-resource-type="page" data-linked-resource-version="4" href="/wiki/spaces/~712020244e9c4c47d24365b81565be06aae4c6/pages/2698248202/10.+Known+Issues+-+Ace+Holdings+Data+at+Month+End">10. Known Issues - Ace Holdings Data at Month End</a>
                        
                        
                    </div>
    </li>
        <li>
        <div>
                <span class="icon aui-icon content-type-page" title="Page">Page:</span>        </div>

        <div class="details">
                                <a data-linked-resource-id="2703098031" data-linked-resource-type="page" data-linked-resource-version="4" href="/wiki/spaces/~712020244e9c4c47d24365b81565be06aae4c6/pages/2703098031/12.+Minors+turning+18">12. Minors turning 18</a>
                        
                        
                    </div>
    </li>
        <li>
        <div>
                <span class="icon aui-icon content-type-page" title="Page">Page:</span>        </div>

        <div class="details">
                                <a data-linked-resource-id="2702376988" data-linked-resource-type="page" data-linked-resource-version="5" href="/wiki/spaces/~712020244e9c4c47d24365b81565be06aae4c6/pages/2702376988/11.+CRM+advisers+and+PWAs+complex+relationships">11. CRM advisers and PWAs complex relationships</a>
                        
                        
                    </div>
    </li>
        <li>
        <div>
                <span class="icon aui-icon content-type-page" title="Page">Page:</span>        </div>

        <div class="details">
                                <a data-linked-resource-id="2688352258" data-linked-resource-type="page" data-linked-resource-version="7" href="/wiki/spaces/~712020244e9c4c47d24365b81565be06aae4c6/pages/2688352258/09.+CIP+0209441Cashman+accounts+balance+report+By+Brenden">09. CIP:0209441Cashman accounts balance report By Brenden</a>
                        
                        
                    </div>
    </li>
    </ul>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657648689.png">image-20240812-012804.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657484854.png">image-20240812-014746.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657222793.png">image-20240812-023151.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657943684.png">image-20240812-023214.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657222799.png">image-20240812-023309.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657615936.png">image-20240812-023409.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657845295.png">image-20240812-023630.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657222836.png">image-20240812-024214.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657550409.png">image-20240812-024450.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657615944.png">image-20240812-024926.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657648727.png">image-20240812-030053.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657779765.png">image-20240812-030420.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657845308.png">image-20240812-030633.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657321077.png">image-20240812-031228.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657419532.png">image-20240812-035238.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2657976361.png">image-20240812-044126.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2658369664.png">image-20240812-210728.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2658762773.png">image-20240812-213427.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2658336901.png">image-20240812-213430.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2659024921.png">image-20240812-221438.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2658926621.png">image-20240812-223704.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2659123237.png">image-20240812-224052.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2681143316.sql">Work Spcripts 5 - putting price and holding together.sql</a> (binary/octet-stream)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2681143366.png">image-20240826-021300.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2681503780.jpg">pricing.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2685140993.png">image-20240827-233849.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2684649494.sql">Check Bloomberg price and BB Code.sql</a> (binary/octet-stream)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2684846094.png">image-20240827-235302.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2684878863.png">image-20240827-235337.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2657288210/2684846100.sql">Check Bloomberg price vs Fusion Price vs Bloom1 excel with BB Code.sql</a> (binary/octet-stream)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on 18-08-25 20:53</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
